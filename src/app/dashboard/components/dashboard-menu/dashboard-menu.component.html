<nav class="navbar navbar-default dashboard-menu">
  <div class="container-fluid" style="padding-left: 0px; padding-right: 0px;">
    <div class="navbar-header">
      <a class="navbar-toggle collapsed dashboard-collapse-btn" data-toggle="collapse" data-target="#idashboardNavbar" [attr.aria-expanded]="!isCollapsed" (click)="toggleCollapse()" [ngClass]="{'collapsed': isCollapsed}">
        <i class="fa fa-bars"></i>
      </a>
    </div>
    <div class="collapse navbar-collapse dashboard-collapse-body" id="idashboardNavbar" [ngClass]="{'in': !isCollapsed}">
      <!--<ul class="nav navbar-nav dashboard-nav dashboard-setting-nav">-->
      <!--<li><a (click)="settingService.toggleItem('dimension')" class="navbar-brand" style="font-size: 14px;"><i class="fa {{settingService.isOpen('dimension') ? 'fa-times' : 'fa-filter'}}"></i></a></li>-->
      <!--<li><a (click)="settingService.toggleItem('share')"><i class="fa {{settingService.isOpen('share') ? 'fa-times' : 'fa-share-alt'}}"></i></a></li>-->
      <!--</ul>-->
      <!--<app-dashboard-menu-items></app-dashboard-menu-items>-->
      <ul class="nav navbar-nav dashboard-nav">
        <li *ngFor="let dashboardMenuItem of dashboardMenuItems$ | async  | filterBy: dashboardName | paginate: config" class="dashboard-list dropdwon" routerLinkActive="active">
          <!--<span *ngIf="dashboardMenuItem.details.editComplete || dashboardMenuItem.details.creationComplete" appClickOutside (clickOutside)="dashboardStatus.id = {}" class="success-badge"><i class="fa fa-check"></i></span>-->
          <a
            routerLink="/dashboards/{{dashboardMenuItem.id}}"
            (dblclick)="openEditForm(dashboardMenuItem.id)"
            (contextmenu)="showOptions(dashboardMenuItem.id)"
            *ngIf="activeEditFormId !== dashboardMenuItem.id && itemToDelete !== dashboardMenuItem.id"
          >
            <span *ngIf="dashboardMenuItem.details.showName">{{dashboardMenuItem.name}}</span>
            <span *ngIf="dashboardMenuItem.details.isNew && !dashboardMenuItem.details.creationComplete">
              <img [src]="'assets/img/balls-3.svg'" alt="" style="height: 20px; width: 20px;">
              Creating dashboard..
            </span>
            <span *ngIf="dashboardMenuItem.details.edited && !dashboardMenuItem.details.editComplete">
              <img [src]="'assets/img/balls-3.svg'" alt="" style="height: 20px; width: 20px;">
              Updating dashboard..
            </span>
          </a>
          <div *ngIf="itemToDelete === dashboardMenuItem.id" class="dashboard-delete-block">
            <small>Delete?</small>
            <button (click)="itemToDelete = ''" class="btn btn-default btn-xs"><i class="fa fa-times"></i></button>
            <button (click)="deleteDashboard(dashboardMenuItem.id)" class="btn btn-danger btn-xs"><i class="fa fa-trash"></i></button>
          </div>
          <app-edit-dashboard
            *ngIf="activeEditFormId === dashboardMenuItem.id"
            [dashboard]="dashboardMenuItem"
            (onUpdateSuccess)="activeEditFormId = ''"
          ></app-edit-dashboard>
          <ul [ngClass]="'option-dropdown'" *ngIf="currentRightClicked == dashboardMenuItem.id" appClickOutside (clickOutside)="currentRightClicked = ''">
            <li><a (click)="openEditForm(dashboardMenuItem.id)">Rename</a></li>
            <li><a (click)="openShareBlock(dashboardMenuItem.id)">Share</a></li>
            <li><a (click)="openDeleteForm(dashboardMenuItem.id)" class="text-danger">Delete</a></li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav dashboard-nav">
        <li *ngIf="showCreateDashboardForm">
          <app-create-dashboard (onDashboardCreate)="showCreateDashboardForm = !showCreateDashboardForm"></app-create-dashboard>
        </li>
        <li>
          <a (click)="showCreateDashboardForm = !showCreateDashboardForm">
            <i class="fa {{showCreateDashboardForm ? 'fa-times' : 'fa-plus'}}"></i>
          </a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right dashboard-right">
        <li>
          <pagination-template *ngIf="(dashboardMenuItems$ | async).length > config.itemsPerPage" #nm="paginationApi" [id]="config.id" (pageChange)="config.currentPage = $event">
            <ul class="custom-pagination pagination dashboard-pagination">
              <li class="pagination-previous" [class.hidden]="nm.isFirstPage()">
                <a (click)="nm.previous()" tooltip="previous"> <i class="fa fa-chevron-left"></i> </a>
              </li>

              <li class="pagination-next" [class.hidden]="nm.isLastPage()">
                <a (click)="nm.next()" tooltip="next"> <i class="fa fa-chevron-right"></i> </a>
              </li>
            </ul>
          </pagination-template>
        </li>
        <li><input type="number" [(ngModel)]="config.itemsPerPage" class="dashboard-pagination-input" min="1" max="{{(dashboardMenuItems$ | async).length <= 8 ? (dashboardMenuItems$ | async).length : 8}}" onkeydown="return false"></li>
        <li *ngIf="showDashboardSearch"><input type="text" size="12" [(ngModel)]="dashboardName" class="dashboard-search-input" autofocus></li>
        <li class="dashboard-search-button" (click)="showDashboardSearch = !showDashboardSearch"><a tooltip="search dashboard" style="border-right-style: none;"><i class="fa {{showDashboardSearch ? 'fa-times':'fa-search'}}"></i></a></li>
      </ul>
    </div>
  </div>
</nav>
