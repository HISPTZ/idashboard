<div
  class="interpretation-comment interpretation-comment-item"
  *ngIf="!showCommentInput"
  (mouseenter)="toggleCommentOptions($event, true)"
  (mouseleave)="toggleCommentOptions($event)"
>
  <div class="interpretation-user-block">
    <div class="interpretation-user">
      {{comment?.user.displayName | abbreviate}}
    </div>
  </div>
  <div class="interpretation-comment-body">
    <div>
      <b>{{ comment?.user.displayName }}</b>
    </div>
    <div
      class="interpretation-comment-text"
      *ngIf="!comment.showEditForm && !comment.showDeleteDialog && !comment.deleting"
    >
      {{ comment?.text}}
    </div>
    <div
      class="interpretation-delete-block"
      *ngIf="comment?.showDeleteDialog"
    >
      This comment will be deleted, are you sure?
      <a
        class="btn btn-xs btn-danger"
        (click)="deleteComment($event)"
      >
        <i class="fa fa-trash-o"></i>
      </a>
      <a
        class="btn btn-xs btn-default"
        (click)="toggleDeleteConfirmationDialog($event)"
      >
        <i class="fa fa-times"></i>
      </a>
    </div>
    <div *ngIf="comment?.deleting">Deleting comment</div>
  </div>
  <div
    class="interpretation-more-comment-options"
    *ngIf="!comment?.deleting"
  >
    <div
      class="interpretation-last-updated"
      *ngIf="comment?.showDate && !comment?.showDropdownOptions"
    >
      {{ comment?.lastUpdated | date}}
    </div>
    <a
      class="interpretation-more-btn"
      title="show more options"
      *ngIf="comment?.showMoreButton"
      (click)="toggleCommentDropdown($event)"
    >
      <img src="assets/img/more.png" alt="" style="height: 20px;">
      <ul
        class="interpretation-more-options-dropdown"
        *ngIf="comment?.showDropdownOptions"
      >
        <li><a>Edit</a></li>
        <li>
          <a
            class="text-danger"
            (click)="toggleDeleteConfirmationDialog($event)"
            *ngIf="comment?.showDeleteButton"
          >Delete</a></li>
      </ul>
    </a>
  </div>
</div>

<div
  class="interpretation-comment interpretation-comment-input-container"
  *ngIf="showCommentInput"
>
  <div class="interpretation-user-block">
    <div class="interpretation-user">
      {{ currentUser.displayName | abbreviate }}
    </div>
  </div>
  <div class="interpretation-comment-input-block">
              <textarea
                type="text"
                cols="100"
                rows="1"
                Autosize
                autofocus
                required
                minlength="10"
                [(ngModel)]="commentFormData.comment"
                name="comment"
                #comment="ngModel"
                placeholder="Write your comment"
                class="interpretation-comment-input"
              ></textarea>
    <div class="pull-right" [hidden]="comment.invalid || commentFormData.comment === ''">
      <button class="btn btn-default post-comment-btn" (click)="cancel($event)">CANCEL</button>
      <button
        [ngClass]="{
    'btn': true,
    'btn-default': true,
    'post-comment-btn': true,
    'disabled': creating
    }"
        (click)="postComment($event)">
        {{creating ? 'POSTING' : 'POST'}}
      </button>
    </div>
  </div>
</div>
