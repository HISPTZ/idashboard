<div class="row">
  <div class="col-md-12 interpretation-block" [style.height]="itemHeight">
    <h4>Interpretation</h4>
    <!--<p>Description will be here</p>-->
    <input
      [(ngModel)]="interpretationTerm"
      class="interpretation-input"
      placeholder="Search interpretation"
    >
    <div
      *ngIf="interpretationTerm && (interpretations | filterBy: interpretationTerm).length === 0"
      style="padding: 15px;"
    >
      Not found
    </div>
    <div
      *ngFor="let interpretation of interpretations  | filterBy: interpretationTerm ; trackBy: interpretation?.id ; let i = index"
      (mouseenter)="toggleInterpretationOptions(interpretation, $event, true)"
      (mouseleave)="toggleInterpretationOptions(interpretation, $event)"
      (click)="toggleCommentBlock(i, $event)"
      [ngClass]="{
      'interpretation-item': true,
      'interpretation-item-border': i > 0
      }"
    >
      <div class="interpretation-user-block">
        <div class="interpretation-user">
          {{interpretation?.user.displayName | abbreviate}}
        </div>
      </div>
      <div class="interpretation-body">
        <div>
          <b>{{interpretation.user.displayName}}</b>
        </div>
        <div class="interpretation-text">{{interpretation.text}}</div>
        <div class="interpretation-options">
          <a
            class="interpretation-comment-btn"
            *ngIf="interpretation.comments.length > 0 && !interpretation.showCommentBlock"
          >
            {{ interpretation.comments.length }} comment{{interpretation.comments.length > 1 ? 's' : ''}}
          </a>
          <a
            class="interpretation-like-btn"
            title="Like this interpretation"
          >
            <i class="fa fa-plus"></i>1
          </a>
          <div
            class="interpretation-like"
            *ngIf="interpretation.likedBy.length > 0"
          >
            {{ getLikeText(interpretation) }}
          </div>
        </div>
        <div
          *ngIf="interpretation.showCommentBlock"
          class="interpretation-comment-container"
        >
          <app-interpretation-comment
            *ngFor="let comment of interpretation.comments"
            [comment]="comment"
          ></app-interpretation-comment>
          <app-interpretation-comment
            [showCommentInput]="true"
            [currentUser]="currentUser"
          ></app-interpretation-comment>
        </div>
      </div>
      <div class="interpretation-more-options">
        <div
          class="interpretation-last-updated"
          *ngIf="interpretation.showDate && !interpretation.showDropdownOptions"
        >
          {{interpretation.lastUpdated | date}}
        </div>
        <div>
          <a
            class="interpretation-more-btn"
            title="show more options"
            (click)="toggleInterpretationDropdownOptions(i, $event)"
            *ngIf="interpretation.showMoreButton"
          >
            <img src="assets/img/more.png" alt="" style="height: 20px;">
          </a>
          <ul
            class="interpretation-more-options-dropdown"
            *ngIf="interpretation.showDropdownOptions"
          >
            <li><a href="">Edit</a></li>
            <li><a href="" class="text-danger">Delete</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-12" style="position: relative;">
    <div class="interpretation-write-form">
      <div class="interpretation-user-block">
        <div class="interpretation-user">
          {{ currentUser.displayName | abbreviate }}
        </div>
      </div>
      <div class="interpretation-comment-input-block">
        <app-add-interpretation
          [visualizationTypeObject]="visualizationTypeObject"
          [rootUrl]="rootUrl"
          (onInterpretationCreate)="updateInterpretationList($event)"
        ></app-add-interpretation>
      </div>
    </div>
  </div>
</div>
