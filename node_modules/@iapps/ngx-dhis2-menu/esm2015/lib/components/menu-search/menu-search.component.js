/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Component, Input } from '@angular/core';
import { animate, state, style, transition, trigger } from '@angular/animations';
import { MenuService } from '../../services/menu.service';
export class MenuSearchComponent {
    /**
     * @param {?} menuService
     */
    constructor(menuService) {
        this.menuService = menuService;
        this.rootUrl = '../../../';
        this.searchWidth = 47;
        this.showApps = false;
        this.apps = [];
        this.originalApps = [];
        this.loadingModules = true;
        this.filteredApp = '';
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.menuService
            .getMenuModules(this.rootUrl)
            .subscribe((menuModules) => {
            if (menuModules !== null) {
                this.loadingModules = false;
                this.originalApps = [...menuModules];
                this.apps = this._prepareMenuModules();
            }
        });
    }
    /**
     * @return {?}
     */
    _prepareMenuModules() {
        return this.filteredApp === ''
            ? this.originalApps.filter((menu) => {
                return !menu.onlyShowOnSearch;
            })
            : this.originalApps;
    }
    /**
     * @return {?}
     */
    updateMenuModules() {
        this.apps = this._prepareMenuModules();
    }
    /**
     * @param {?=} e
     * @return {?}
     */
    widdenSearch(e) {
        if (e) {
            e.stopPropagation();
        }
        document.getElementById('menu_search_input').focus();
        this.showApps = true;
    }
    /**
     * @param {?=} e
     * @return {?}
     */
    reduceSearch(e) {
        if (e) {
            e.stopPropagation();
        }
        document.getElementById('menu_search_input').blur();
        this.showApps = false;
    }
    /**
     * @param {?} e
     * @return {?}
     */
    toggleSearch(e) {
        e.stopPropagation();
        if (this.showApps) {
            this.reduceSearch();
        }
        else {
            this.widdenSearch();
        }
    }
}
MenuSearchComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-menu-search',
                template: `<div class="menu-search-container" appClickOutside (clickOutside)="reduceSearch()">
  <div class="menu-search-icon">
    <svg class="" viewBox="0 0 24 24"
         style="display: inline-block; color: rgba(0, 0, 0, 0.87); fill: white; height: 24px; width: 24px; user-select: none; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms; padding: 0px;">
      <path
        d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
    </svg>
  </div>
  <div class="menu-search-input-block">
    <input type="text" class="menu-search-input" id="menu_search_input" placeholder="Search Apps"
           (focus)="widdenSearch($event)" [(ngModel)]="filteredApp" (ngModelChange)="updateMenuModules()"/>
    <span class="underline"></span>
  </div>
  <div class="menu-toggle-link">
    <a (click)="toggleSearch($event)">
      <svg class="menu-toggle-icon" viewBox="0 0 24 24">
        <path
          d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"></path>
      </svg>
    </a>
  </div>

  <div class="menu-list-block" [@slide] *ngIf="showApps">
    <div *ngIf="(apps | filterByName: filteredApp).length !== 0" class="menu-inner-list-block">
      <a *ngFor="let app of  apps | filterByName:filteredApp" [href]="app.defaultAction" class="app-menu-btn"
         title="{{ app.description }}">
        <div class="app-menu-inner-block">
          <img alt="" [src]="app.icon">
          <div class="app-menu-name">{{app.displayName}}</div>
        </div>
      </a>
    </div>
    <div class="menu-inner-list-block-no-match" *ngIf="(apps | filterByName: filteredApp).length == 0">
      <p>No match found!</p>
    </div>
    <div class="menu-app-management-block">
      <a [href]="rootUrl + 'dhis-web-menu-management/'" class="app-management-btn">
        Manage my Apps
      </a>
    </div>
  </div>
</div>
`,
                styles: [`.menu-search-container{display:flex;position:relative;height:100%}.menu-search-input-block{width:390px}#menu_search_input{padding:0!important;margin:0!important;background-color:transparent;color:#fff!important;float:right;border-style:none;border-bottom:1px solid #f1f1f1;transition:all .2s ease-in-out;display:flex;align-items:center;height:37px;font-size:15px;width:100%}#menu_search_input::-webkit-input-placeholder{color:rgba(255,255,255,.7)}#menu_search_input::-moz-placeholder{color:rgba(255,255,255,.7)}#menu_search_input:-ms-input-placeholder{color:rgba(255,255,255,.7)}#menu_search_input:-moz-placeholder{color:rgba(255,255,255,.7)}#menu_search_input:focus{outline:0}#menu_search_input:focus+.underline{-webkit-transform:scale(1);transform:scale(1)}.underline{background-color:#fff;position:absolute;height:2px;width:390px;bottom:11px;-webkit-transform:scale(0,1);transform:scale(0,1);transition:all .3s linear}.menu-toggle-link{margin:10px}.menu-toggle-link a{cursor:pointer}.menu-toggle-icon{display:block;height:25px;width:25px;fill:#fff}.menu-list-block{position:absolute;display:block;top:49px;width:590px;min-height:430px;right:10px;z-index:-1000;font-size:14px;text-align:left;list-style:none;background-color:#fff;box-shadow:0 0 3px rgba(0,0,0,.3)}.menu-inner-list-block{display:flex;overflow:hidden;flex-wrap:wrap;height:380px;padding:10px 5px 10px 10px}.menu-inner-list-block:hover{overflow:auto}.menu-inner-list-block-no-match{display:flex;overflow:hidden;flex-wrap:wrap;height:380px;font-size:26px;color:#ccc}.menu-inner-list-block-no-match p{padding-top:100px;width:100%!important;text-align:center}.apps{padding:15px;overflow:auto;right:35px;width:600px;height:400px}.apps-hidden{display:none}.apps,.profile{position:absolute;background-color:#fff;border:1px solid #ececec;top:50px;z-index:1000;box-shadow:0 5px 10px rgba(0,0,0,.175)}.app-menu-btn{margin:5px;text-decoration:none;height:120px;width:120px;display:flex;justify-content:center;align-items:center;transition:all .2s ease-in-out;padding:5px}.app-menu-btn:hover{background-color:#f1f1f1;-webkit-transform:scale(1.01);transform:scale(1.01)}.app-menu-btn img{display:block;margin:auto;height:53px}.app-menu-name{margin-top:5px;font-size:13px;text-align:center;color:#222}.menu-inner-list-block::-webkit-scrollbar{width:10px}.menu-inner-list-block::-webkit-scrollbar-track{background-color:rgba(0,0,0,.02)}.menu-inner-list-block::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.1)}.menu-app-management-block{width:100%;height:50px;display:flex;align-items:center;justify-content:center;box-shadow:0 -1px 2px -1px rgba(0,0,0,.16)}.app-management-btn{transition:all .2s ease-in-out;display:flex;align-items:center;justify-content:center;font-size:13px;height:40px;width:97%;color:#222;text-decoration:none}.app-management-btn:hover{background-color:#eee;-webkit-transform:scale(1.01);transform:scale(1.01)}.menu-search-icon{display:flex;align-items:center;margin-right:7px}`],
                animations: [
                    trigger('slide', [
                        state('in', style({
                            opacity: 1
                        })),
                        transition('void => *', [
                            style({
                                transform: 'translateY(-100%)'
                            }),
                            animate(300)
                        ]),
                        transition('* => void', [
                            animate(300),
                            style({
                                transform: 'translateY(-100%)'
                            })
                        ])
                    ])
                ]
            },] },
];
/** @nocollapse */
MenuSearchComponent.ctorParameters = () => [
    { type: MenuService }
];
MenuSearchComponent.propDecorators = {
    rootUrl: [{ type: Input }]
};
function MenuSearchComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    MenuSearchComponent.prototype.rootUrl;
    /** @type {?} */
    MenuSearchComponent.prototype.searchWidth;
    /** @type {?} */
    MenuSearchComponent.prototype.showApps;
    /** @type {?} */
    MenuSearchComponent.prototype.apps;
    /** @type {?} */
    MenuSearchComponent.prototype.originalApps;
    /** @type {?} */
    MenuSearchComponent.prototype.loadingModules;
    /** @type {?} */
    MenuSearchComponent.prototype.filteredApp;
    /** @type {?} */
    MenuSearchComponent.prototype.menuService;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS1zZWFyY2guY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGlhcHBzL25neC1kaGlzMi1tZW51LyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvbWVudS1zZWFyY2gvbWVudS1zZWFyY2guY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN6RCxPQUFPLEVBQ0wsT0FBTyxFQUNQLEtBQUssRUFDTCxLQUFLLEVBQ0wsVUFBVSxFQUNWLE9BQU8sRUFDUixNQUFNLHFCQUFxQixDQUFDO0FBQzdCLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQXVFMUQsTUFBTTs7OztJQVFKLFlBQW9CLFdBQXdCO1FBQXhCLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBQzFDLElBQUksQ0FBQyxPQUFPLEdBQUcsV0FBVyxDQUFDO1FBQzNCLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ2YsSUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7UUFDM0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7S0FDdkI7Ozs7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLFdBQVc7YUFDYixjQUFjLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQzthQUM1QixTQUFTLENBQUMsQ0FBQyxXQUFnQixFQUFFLEVBQUU7WUFDOUIsRUFBRSxDQUFDLENBQUMsV0FBVyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ3pCLElBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO2dCQUM1QixJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQztnQkFDckMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQzthQUN4QztTQUNGLENBQUMsQ0FBQztLQUNOOzs7O0lBRU8sbUJBQW1CO1FBQ3pCLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxLQUFLLEVBQUU7WUFDNUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBUyxFQUFFLEVBQUU7Z0JBQ3JDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQzthQUMvQixDQUFDO1lBQ0osQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUM7Ozs7O0lBR3hCLGlCQUFpQjtRQUNmLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7S0FDeEM7Ozs7O0lBRUQsWUFBWSxDQUFDLENBQUU7UUFDYixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ04sQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFDO1NBQ3JCO1FBQ0QsUUFBUSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3JELElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO0tBQ3RCOzs7OztJQUVELFlBQVksQ0FBQyxDQUFFO1FBQ2IsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNOLENBQUMsQ0FBQyxlQUFlLEVBQUUsQ0FBQztTQUNyQjtRQUNELFFBQVEsQ0FBQyxjQUFjLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNwRCxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztLQUN2Qjs7Ozs7SUFFRCxZQUFZLENBQUMsQ0FBQztRQUNaLENBQUMsQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUNwQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNsQixJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7U0FDckI7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztTQUNyQjtLQUNGOzs7WUF0SUYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxpQkFBaUI7Z0JBQzNCLFFBQVEsRUFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBMENYO2dCQUNDLE1BQU0sRUFBRSxDQUFDLGc1RkFBZzVGLENBQUM7Z0JBQzE1RixVQUFVLEVBQUU7b0JBQ1YsT0FBTyxDQUFDLE9BQU8sRUFBRTt3QkFDZixLQUFLLENBQ0gsSUFBSSxFQUNKLEtBQUssQ0FBQzs0QkFDSixPQUFPLEVBQUUsQ0FBQzt5QkFDWCxDQUFDLENBQ0g7d0JBQ0QsVUFBVSxDQUFDLFdBQVcsRUFBRTs0QkFDdEIsS0FBSyxDQUFDO2dDQUNKLFNBQVMsRUFBRSxtQkFBbUI7NkJBQy9CLENBQUM7NEJBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQzt5QkFDYixDQUFDO3dCQUNGLFVBQVUsQ0FBQyxXQUFXLEVBQUU7NEJBQ3RCLE9BQU8sQ0FBQyxHQUFHLENBQUM7NEJBQ1osS0FBSyxDQUFDO2dDQUNKLFNBQVMsRUFBRSxtQkFBbUI7NkJBQy9CLENBQUM7eUJBQ0gsQ0FBQztxQkFDSCxDQUFDO2lCQUNIO2FBQ0Y7Ozs7WUF0RVEsV0FBVzs7O3NCQXdFakIsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgYW5pbWF0ZSxcbiAgc3RhdGUsXG4gIHN0eWxlLFxuICB0cmFuc2l0aW9uLFxuICB0cmlnZ2VyXG59IGZyb20gJ0Bhbmd1bGFyL2FuaW1hdGlvbnMnO1xuaW1wb3J0IHsgTWVudVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9tZW51LnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdhcHAtbWVudS1zZWFyY2gnLFxuICB0ZW1wbGF0ZTogYDxkaXYgY2xhc3M9XCJtZW51LXNlYXJjaC1jb250YWluZXJcIiBhcHBDbGlja091dHNpZGUgKGNsaWNrT3V0c2lkZSk9XCJyZWR1Y2VTZWFyY2goKVwiPlxuICA8ZGl2IGNsYXNzPVwibWVudS1zZWFyY2gtaWNvblwiPlxuICAgIDxzdmcgY2xhc3M9XCJcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcbiAgICAgICAgIHN0eWxlPVwiZGlzcGxheTogaW5saW5lLWJsb2NrOyBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjg3KTsgZmlsbDogd2hpdGU7IGhlaWdodDogMjRweDsgd2lkdGg6IDI0cHg7IHVzZXItc2VsZWN0OiBub25lOyB0cmFuc2l0aW9uOiBhbGwgNDUwbXMgY3ViaWMtYmV6aWVyKDAuMjMsIDEsIDAuMzIsIDEpIDBtczsgcGFkZGluZzogMHB4O1wiPlxuICAgICAgPHBhdGhcbiAgICAgICAgZD1cIk0xNS41IDE0aC0uNzlsLS4yOC0uMjdDMTUuNDEgMTIuNTkgMTYgMTEuMTEgMTYgOS41IDE2IDUuOTEgMTMuMDkgMyA5LjUgM1MzIDUuOTEgMyA5LjUgNS45MSAxNiA5LjUgMTZjMS42MSAwIDMuMDktLjU5IDQuMjMtMS41N2wuMjcuMjh2Ljc5bDUgNC45OUwyMC40OSAxOWwtNC45OS01em0tNiAwQzcuMDEgMTQgNSAxMS45OSA1IDkuNVM3LjAxIDUgOS41IDUgMTQgNy4wMSAxNCA5LjUgMTEuOTkgMTQgOS41IDE0elwiPjwvcGF0aD5cbiAgICA8L3N2Zz5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9XCJtZW51LXNlYXJjaC1pbnB1dC1ibG9ja1wiPlxuICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwibWVudS1zZWFyY2gtaW5wdXRcIiBpZD1cIm1lbnVfc2VhcmNoX2lucHV0XCIgcGxhY2Vob2xkZXI9XCJTZWFyY2ggQXBwc1wiXG4gICAgICAgICAgIChmb2N1cyk9XCJ3aWRkZW5TZWFyY2goJGV2ZW50KVwiIFsobmdNb2RlbCldPVwiZmlsdGVyZWRBcHBcIiAobmdNb2RlbENoYW5nZSk9XCJ1cGRhdGVNZW51TW9kdWxlcygpXCIvPlxuICAgIDxzcGFuIGNsYXNzPVwidW5kZXJsaW5lXCI+PC9zcGFuPlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz1cIm1lbnUtdG9nZ2xlLWxpbmtcIj5cbiAgICA8YSAoY2xpY2spPVwidG9nZ2xlU2VhcmNoKCRldmVudClcIj5cbiAgICAgIDxzdmcgY2xhc3M9XCJtZW51LXRvZ2dsZS1pY29uXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICA8cGF0aFxuICAgICAgICAgIGQ9XCJNNCA4aDRWNEg0djR6bTYgMTJoNHYtNGgtNHY0em0tNiAwaDR2LTRINHY0em0wLTZoNHYtNEg0djR6bTYgMGg0di00aC00djR6bTYtMTB2NGg0VjRoLTR6bS02IDRoNFY0aC00djR6bTYgNmg0di00aC00djR6bTAgNmg0di00aC00djR6XCI+PC9wYXRoPlxuICAgICAgPC9zdmc+XG4gICAgPC9hPlxuICA8L2Rpdj5cblxuICA8ZGl2IGNsYXNzPVwibWVudS1saXN0LWJsb2NrXCIgW0BzbGlkZV0gKm5nSWY9XCJzaG93QXBwc1wiPlxuICAgIDxkaXYgKm5nSWY9XCIoYXBwcyB8IGZpbHRlckJ5TmFtZTogZmlsdGVyZWRBcHApLmxlbmd0aCAhPT0gMFwiIGNsYXNzPVwibWVudS1pbm5lci1saXN0LWJsb2NrXCI+XG4gICAgICA8YSAqbmdGb3I9XCJsZXQgYXBwIG9mICBhcHBzIHwgZmlsdGVyQnlOYW1lOmZpbHRlcmVkQXBwXCIgW2hyZWZdPVwiYXBwLmRlZmF1bHRBY3Rpb25cIiBjbGFzcz1cImFwcC1tZW51LWJ0blwiXG4gICAgICAgICB0aXRsZT1cInt7IGFwcC5kZXNjcmlwdGlvbiB9fVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYXBwLW1lbnUtaW5uZXItYmxvY2tcIj5cbiAgICAgICAgICA8aW1nIGFsdD1cIlwiIFtzcmNdPVwiYXBwLmljb25cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXBwLW1lbnUtbmFtZVwiPnt7YXBwLmRpc3BsYXlOYW1lfX08L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2E+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cIm1lbnUtaW5uZXItbGlzdC1ibG9jay1uby1tYXRjaFwiICpuZ0lmPVwiKGFwcHMgfCBmaWx0ZXJCeU5hbWU6IGZpbHRlcmVkQXBwKS5sZW5ndGggPT0gMFwiPlxuICAgICAgPHA+Tm8gbWF0Y2ggZm91bmQhPC9wPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJtZW51LWFwcC1tYW5hZ2VtZW50LWJsb2NrXCI+XG4gICAgICA8YSBbaHJlZl09XCJyb290VXJsICsgJ2RoaXMtd2ViLW1lbnUtbWFuYWdlbWVudC8nXCIgY2xhc3M9XCJhcHAtbWFuYWdlbWVudC1idG5cIj5cbiAgICAgICAgTWFuYWdlIG15IEFwcHNcbiAgICAgIDwvYT5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5cbmAsXG4gIHN0eWxlczogW2AubWVudS1zZWFyY2gtY29udGFpbmVye2Rpc3BsYXk6ZmxleDtwb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6MTAwJX0ubWVudS1zZWFyY2gtaW5wdXQtYmxvY2t7d2lkdGg6MzkwcHh9I21lbnVfc2VhcmNoX2lucHV0e3BhZGRpbmc6MCFpbXBvcnRhbnQ7bWFyZ2luOjAhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7Y29sb3I6I2ZmZiFpbXBvcnRhbnQ7ZmxvYXQ6cmlnaHQ7Ym9yZGVyLXN0eWxlOm5vbmU7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2YxZjFmMTt0cmFuc2l0aW9uOmFsbCAuMnMgZWFzZS1pbi1vdXQ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtoZWlnaHQ6MzdweDtmb250LXNpemU6MTVweDt3aWR0aDoxMDAlfSNtZW51X3NlYXJjaF9pbnB1dDo6LXdlYmtpdC1pbnB1dC1wbGFjZWhvbGRlcntjb2xvcjpyZ2JhKDI1NSwyNTUsMjU1LC43KX0jbWVudV9zZWFyY2hfaW5wdXQ6Oi1tb3otcGxhY2Vob2xkZXJ7Y29sb3I6cmdiYSgyNTUsMjU1LDI1NSwuNyl9I21lbnVfc2VhcmNoX2lucHV0Oi1tcy1pbnB1dC1wbGFjZWhvbGRlcntjb2xvcjpyZ2JhKDI1NSwyNTUsMjU1LC43KX0jbWVudV9zZWFyY2hfaW5wdXQ6LW1vei1wbGFjZWhvbGRlcntjb2xvcjpyZ2JhKDI1NSwyNTUsMjU1LC43KX0jbWVudV9zZWFyY2hfaW5wdXQ6Zm9jdXN7b3V0bGluZTowfSNtZW51X3NlYXJjaF9pbnB1dDpmb2N1cysudW5kZXJsaW5ley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpO3RyYW5zZm9ybTpzY2FsZSgxKX0udW5kZXJsaW5le2JhY2tncm91bmQtY29sb3I6I2ZmZjtwb3NpdGlvbjphYnNvbHV0ZTtoZWlnaHQ6MnB4O3dpZHRoOjM5MHB4O2JvdHRvbToxMXB4Oy13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDAsMSk7dHJhbnNmb3JtOnNjYWxlKDAsMSk7dHJhbnNpdGlvbjphbGwgLjNzIGxpbmVhcn0ubWVudS10b2dnbGUtbGlua3ttYXJnaW46MTBweH0ubWVudS10b2dnbGUtbGluayBhe2N1cnNvcjpwb2ludGVyfS5tZW51LXRvZ2dsZS1pY29ue2Rpc3BsYXk6YmxvY2s7aGVpZ2h0OjI1cHg7d2lkdGg6MjVweDtmaWxsOiNmZmZ9Lm1lbnUtbGlzdC1ibG9ja3twb3NpdGlvbjphYnNvbHV0ZTtkaXNwbGF5OmJsb2NrO3RvcDo0OXB4O3dpZHRoOjU5MHB4O21pbi1oZWlnaHQ6NDMwcHg7cmlnaHQ6MTBweDt6LWluZGV4Oi0xMDAwO2ZvbnQtc2l6ZToxNHB4O3RleHQtYWxpZ246bGVmdDtsaXN0LXN0eWxlOm5vbmU7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaGFkb3c6MCAwIDNweCByZ2JhKDAsMCwwLC4zKX0ubWVudS1pbm5lci1saXN0LWJsb2Nre2Rpc3BsYXk6ZmxleDtvdmVyZmxvdzpoaWRkZW47ZmxleC13cmFwOndyYXA7aGVpZ2h0OjM4MHB4O3BhZGRpbmc6MTBweCA1cHggMTBweCAxMHB4fS5tZW51LWlubmVyLWxpc3QtYmxvY2s6aG92ZXJ7b3ZlcmZsb3c6YXV0b30ubWVudS1pbm5lci1saXN0LWJsb2NrLW5vLW1hdGNoe2Rpc3BsYXk6ZmxleDtvdmVyZmxvdzpoaWRkZW47ZmxleC13cmFwOndyYXA7aGVpZ2h0OjM4MHB4O2ZvbnQtc2l6ZToyNnB4O2NvbG9yOiNjY2N9Lm1lbnUtaW5uZXItbGlzdC1ibG9jay1uby1tYXRjaCBwe3BhZGRpbmctdG9wOjEwMHB4O3dpZHRoOjEwMCUhaW1wb3J0YW50O3RleHQtYWxpZ246Y2VudGVyfS5hcHBze3BhZGRpbmc6MTVweDtvdmVyZmxvdzphdXRvO3JpZ2h0OjM1cHg7d2lkdGg6NjAwcHg7aGVpZ2h0OjQwMHB4fS5hcHBzLWhpZGRlbntkaXNwbGF5Om5vbmV9LmFwcHMsLnByb2ZpbGV7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JvcmRlcjoxcHggc29saWQgI2VjZWNlYzt0b3A6NTBweDt6LWluZGV4OjEwMDA7Ym94LXNoYWRvdzowIDVweCAxMHB4IHJnYmEoMCwwLDAsLjE3NSl9LmFwcC1tZW51LWJ0bnttYXJnaW46NXB4O3RleHQtZGVjb3JhdGlvbjpub25lO2hlaWdodDoxMjBweDt3aWR0aDoxMjBweDtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7dHJhbnNpdGlvbjphbGwgLjJzIGVhc2UtaW4tb3V0O3BhZGRpbmc6NXB4fS5hcHAtbWVudS1idG46aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZjFmMWYxOy13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEuMDEpO3RyYW5zZm9ybTpzY2FsZSgxLjAxKX0uYXBwLW1lbnUtYnRuIGltZ3tkaXNwbGF5OmJsb2NrO21hcmdpbjphdXRvO2hlaWdodDo1M3B4fS5hcHAtbWVudS1uYW1le21hcmdpbi10b3A6NXB4O2ZvbnQtc2l6ZToxM3B4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOiMyMjJ9Lm1lbnUtaW5uZXItbGlzdC1ibG9jazo6LXdlYmtpdC1zY3JvbGxiYXJ7d2lkdGg6MTBweH0ubWVudS1pbm5lci1saXN0LWJsb2NrOjotd2Via2l0LXNjcm9sbGJhci10cmFja3tiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjAyKX0ubWVudS1pbm5lci1saXN0LWJsb2NrOjotd2Via2l0LXNjcm9sbGJhci10aHVtYntiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjEpfS5tZW51LWFwcC1tYW5hZ2VtZW50LWJsb2Nre3dpZHRoOjEwMCU7aGVpZ2h0OjUwcHg7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2JveC1zaGFkb3c6MCAtMXB4IDJweCAtMXB4IHJnYmEoMCwwLDAsLjE2KX0uYXBwLW1hbmFnZW1lbnQtYnRue3RyYW5zaXRpb246YWxsIC4ycyBlYXNlLWluLW91dDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7Zm9udC1zaXplOjEzcHg7aGVpZ2h0OjQwcHg7d2lkdGg6OTclO2NvbG9yOiMyMjI7dGV4dC1kZWNvcmF0aW9uOm5vbmV9LmFwcC1tYW5hZ2VtZW50LWJ0bjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlZWU7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMS4wMSk7dHJhbnNmb3JtOnNjYWxlKDEuMDEpfS5tZW51LXNlYXJjaC1pY29ue2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7bWFyZ2luLXJpZ2h0OjdweH1gXSxcbiAgYW5pbWF0aW9uczogW1xuICAgIHRyaWdnZXIoJ3NsaWRlJywgW1xuICAgICAgc3RhdGUoXG4gICAgICAgICdpbicsXG4gICAgICAgIHN0eWxlKHtcbiAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgIH0pXG4gICAgICApLFxuICAgICAgdHJhbnNpdGlvbigndm9pZCA9PiAqJywgW1xuICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgtMTAwJSknXG4gICAgICAgIH0pLFxuICAgICAgICBhbmltYXRlKDMwMClcbiAgICAgIF0pLFxuICAgICAgdHJhbnNpdGlvbignKiA9PiB2b2lkJywgW1xuICAgICAgICBhbmltYXRlKDMwMCksXG4gICAgICAgIHN0eWxlKHtcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKC0xMDAlKSdcbiAgICAgICAgfSlcbiAgICAgIF0pXG4gICAgXSlcbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBNZW51U2VhcmNoQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgcm9vdFVybDogc3RyaW5nO1xuICBzZWFyY2hXaWR0aDogbnVtYmVyO1xuICBzaG93QXBwczogYm9vbGVhbjtcbiAgYXBwczogYW55W107XG4gIG9yaWdpbmFsQXBwczogYW55W107XG4gIGxvYWRpbmdNb2R1bGVzOiBib29sZWFuO1xuICBmaWx0ZXJlZEFwcDogc3RyaW5nO1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1lbnVTZXJ2aWNlOiBNZW51U2VydmljZSkge1xuICAgIHRoaXMucm9vdFVybCA9ICcuLi8uLi8uLi8nO1xuICAgIHRoaXMuc2VhcmNoV2lkdGggPSA0NztcbiAgICB0aGlzLnNob3dBcHBzID0gZmFsc2U7XG4gICAgdGhpcy5hcHBzID0gW107XG4gICAgdGhpcy5vcmlnaW5hbEFwcHMgPSBbXTtcbiAgICB0aGlzLmxvYWRpbmdNb2R1bGVzID0gdHJ1ZTtcbiAgICB0aGlzLmZpbHRlcmVkQXBwID0gJyc7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLm1lbnVTZXJ2aWNlXG4gICAgICAuZ2V0TWVudU1vZHVsZXModGhpcy5yb290VXJsKVxuICAgICAgLnN1YnNjcmliZSgobWVudU1vZHVsZXM6IGFueSkgPT4ge1xuICAgICAgICBpZiAobWVudU1vZHVsZXMgIT09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLmxvYWRpbmdNb2R1bGVzID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5vcmlnaW5hbEFwcHMgPSBbLi4ubWVudU1vZHVsZXNdO1xuICAgICAgICAgIHRoaXMuYXBwcyA9IHRoaXMuX3ByZXBhcmVNZW51TW9kdWxlcygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX3ByZXBhcmVNZW51TW9kdWxlcygpIHtcbiAgICByZXR1cm4gdGhpcy5maWx0ZXJlZEFwcCA9PT0gJydcbiAgICAgID8gdGhpcy5vcmlnaW5hbEFwcHMuZmlsdGVyKChtZW51OiBhbnkpID0+IHtcbiAgICAgICAgICByZXR1cm4gIW1lbnUub25seVNob3dPblNlYXJjaDtcbiAgICAgICAgfSlcbiAgICAgIDogdGhpcy5vcmlnaW5hbEFwcHM7XG4gIH1cblxuICB1cGRhdGVNZW51TW9kdWxlcygpIHtcbiAgICB0aGlzLmFwcHMgPSB0aGlzLl9wcmVwYXJlTWVudU1vZHVsZXMoKTtcbiAgfVxuXG4gIHdpZGRlblNlYXJjaChlPykge1xuICAgIGlmIChlKSB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudV9zZWFyY2hfaW5wdXQnKS5mb2N1cygpO1xuICAgIHRoaXMuc2hvd0FwcHMgPSB0cnVlO1xuICB9XG5cbiAgcmVkdWNlU2VhcmNoKGU/KSB7XG4gICAgaWYgKGUpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51X3NlYXJjaF9pbnB1dCcpLmJsdXIoKTtcbiAgICB0aGlzLnNob3dBcHBzID0gZmFsc2U7XG4gIH1cblxuICB0b2dnbGVTZWFyY2goZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgaWYgKHRoaXMuc2hvd0FwcHMpIHtcbiAgICAgIHRoaXMucmVkdWNlU2VhcmNoKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud2lkZGVuU2VhcmNoKCk7XG4gICAgfVxuICB9XG59XG4iXX0=