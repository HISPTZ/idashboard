/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input } from '@angular/core';
import { MenuService } from '../../services/menu.service';
import { PROFILE_MENUS } from '../../constants/profile-menus';
import { LOG_OUT } from '../../icons';
var MenuSideBarComponent = /** @class */ (function () {
    function MenuSideBarComponent(menuService) {
        this.menuService = menuService;
        this.showProfile = false;
        this.rootUrl = '../../../';
        this.loadingUser = true;
        this.apps = [];
        this.originalApps = [];
        this.loadingModules = true;
        this.profileMenus = PROFILE_MENUS;
        this.filteredApp = '';
        this.showSidebarApps = false;
        this.logOutIcon = LOG_OUT;
    }
    /**
     * @return {?}
     */
    MenuSideBarComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.menuService.getUserInfo(this.rootUrl).subscribe(function (profile) {
            if (profile) {
                _this.currentUser = {
                    name: profile.displayName,
                    email: profile.email
                };
            }
            _this.loadingUser = false;
        });
        this.menuService
            .getMenuModules(this.rootUrl)
            .subscribe(function (menuModules) {
            if (menuModules !== null) {
                _this.loadingModules = false;
                _this.originalApps = tslib_1.__spread(menuModules);
                _this.apps = _this._prepareMenuModules();
            }
        });
    };
    /**
     * @return {?}
     */
    MenuSideBarComponent.prototype._prepareMenuModules = /**
     * @return {?}
     */
    function () {
        return this.filteredApp === ''
            ? this.originalApps.filter(function (menu) {
                return !menu.onlyShowOnSearch;
            })
            : this.originalApps;
    };
    /**
     * @param {?} e
     * @return {?}
     */
    MenuSideBarComponent.prototype.toggleSidebarMenus = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        e.stopPropagation();
        this.showSidebarApps = !this.showSidebarApps;
    };
    /**
     * @return {?}
     */
    MenuSideBarComponent.prototype.updateMenuModules = /**
     * @return {?}
     */
    function () {
        this.apps = this._prepareMenuModules();
    };
    MenuSideBarComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-menu-side-bar',
                    template: "<div class=\"sidebar-container\">\n  <div class=\"sidebar-user-profile-block\">\n    <div class=\"sidebar-user-profile-logo\" *ngIf=\"!loadingUser\">{{currentUser?.name | abbreviate}}</div>\n    <div class=\"sidebar-user-profile-info\">\n      <div>\n        <div class=\"sidebar-user-name\" *ngIf=\"!loadingUser\">{{currentUser?.name}}</div>\n        <div class=\"sidebar-user-email\" *ngIf=\"!loadingUser\">{{currentUser?.email}}</div>\n      </div>\n    </div>\n  </div>\n  <ul class=\"sidebar-list-block\">\n    <li [ngClass]=\"{\n          'sidebar-app-hidden': !showSidebarApps\n        }\">\n      <input type=\"text\" class=\"sidebar-app-input\" placeholder=\"Search Apps\" [(ngModel)]=\"filteredApp\" (ngModelChange)=\"updateMenuModules()\">\n    </li>\n    <li class=\"sidebar-app-list\" [ngClass]=\"{\n          'sidebar-app-hidden': !showSidebarApps\n        }\">\n      <a *ngFor=\"let app of  apps | filterByName: filteredApp\" [href]=\"app.defaultAction\" class=\"sidebar-app-menu-btn\">\n        <div class=\"sidebar-app-menu-btn-content\">\n          <img alt=\"\" [src]=\"app.icon\" title=\"{{app.displayName}}\">\n          <div class=\"app-menu-name\">{{app.displayName}}</div>\n        </div>\n      </a>\n    </li>\n    <li *ngFor=\"let profileMenu of profileMenus\">\n      <a [href]=\"rootUrl + profileMenu.defaultAction\">\n        <img alt=\"\" [src]=\"profileMenu.icon\"> {{profileMenu.name}}\n      </a>\n    </li>\n    <li>\n      <a [href]=\"rootUrl + 'dhis-web-commons-security/logout.action'\">\n        <img [src]=\"logOutIcon\"> Log Out\n      </a>\n    </li>\n  </ul>\n</div>",
                    styles: [".sidebar-user-profile-block{text-align:left;background-color:#eee;height:50px;padding:5px;display:flex}.sidebar-user-profile-logo{height:40px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:500;color:#9e9e9e;width:40px;border-radius:25px;text-align:center;background-color:#ddd}.sidebar-user-profile-info{display:flex;padding-left:10px;align-items:center}.sidebar-list-block{list-style-type:none;margin:0;padding:0;display:block}.sidebar-hidden{display:none!important}.sidebar-app-input{border-style:none;border-bottom:1px solid #eee;color:#777;width:100%;font-size:12px;padding:5px 7px}.sidebar-app-input:focus{outline:0}.sidebar-list-block li a{text-decoration:none;font-size:13px;display:block;color:#000;border-bottom:1px solid #eee;padding:7px 10px}.sidebar-list-block li a img{height:15px}.sidebar-app-list{display:flex;overflow:auto;height:200px;flex-wrap:wrap}.sidebar-app-menu-btn{display:flex!important;align-items:center;justify-content:center;margin:5px;text-decoration:none;border-radius:3px;border:1px solid #eee;transition:all .2s ease-in-out;width:80px;height:80px}.sidebar-app-menu-btn-content{text-align:center}.app-menu-name{margin-top:5px;font-size:11px}.sidebar-user-name{font-size:13px}.sidebar-user-email{font-size:11px;color:#777;font-style:italic}"]
                },] },
    ];
    /** @nocollapse */
    MenuSideBarComponent.ctorParameters = function () { return [
        { type: MenuService }
    ]; };
    MenuSideBarComponent.propDecorators = {
        rootUrl: [{ type: Input }]
    };
    return MenuSideBarComponent;
}());
export { MenuSideBarComponent };
function MenuSideBarComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    MenuSideBarComponent.prototype.rootUrl;
    /** @type {?} */
    MenuSideBarComponent.prototype.showProfile;
    /** @type {?} */
    MenuSideBarComponent.prototype.currentUser;
    /** @type {?} */
    MenuSideBarComponent.prototype.loadingUser;
    /** @type {?} */
    MenuSideBarComponent.prototype.profileMenus;
    /** @type {?} */
    MenuSideBarComponent.prototype.apps;
    /** @type {?} */
    MenuSideBarComponent.prototype.originalApps;
    /** @type {?} */
    MenuSideBarComponent.prototype.loadingModules;
    /** @type {?} */
    MenuSideBarComponent.prototype.filteredApp;
    /** @type {?} */
    MenuSideBarComponent.prototype.showSidebarApps;
    /** @type {?} */
    MenuSideBarComponent.prototype.logOutIcon;
    /** @type {?} */
    MenuSideBarComponent.prototype.menuService;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS1zaWRlLWJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaWFwcHMvbmd4LWRoaXMyLW1lbnUvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9tZW51LXNpZGUtYmFyL21lbnUtc2lkZS1iYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFDekQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQzFELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUM5RCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sYUFBYSxDQUFDOztJQTBEcEMsOEJBQW9CLFdBQXdCO1FBQXhCLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBQzFDLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxPQUFPLEdBQUcsV0FBVyxDQUFDO1FBQzNCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO1FBQ3hCLElBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ2YsSUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7UUFDM0IsSUFBSSxDQUFDLFlBQVksR0FBRyxhQUFhLENBQUM7UUFDbEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7UUFDdEIsSUFBSSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUM7UUFDN0IsSUFBSSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUM7S0FDM0I7Ozs7SUFFRCx1Q0FBUTs7O0lBQVI7UUFBQSxpQkFxQkM7UUFwQkMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFDLE9BQVk7WUFDaEUsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztnQkFDWixLQUFJLENBQUMsV0FBVyxHQUFHO29CQUNqQixJQUFJLEVBQUUsT0FBTyxDQUFDLFdBQVc7b0JBQ3pCLEtBQUssRUFBRSxPQUFPLENBQUMsS0FBSztpQkFDckIsQ0FBQzthQUNIO1lBRUQsS0FBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7U0FDMUIsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLFdBQVc7YUFDYixjQUFjLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQzthQUM1QixTQUFTLENBQUMsVUFBQyxXQUFnQjtZQUMxQixFQUFFLENBQUMsQ0FBQyxXQUFXLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDekIsS0FBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7Z0JBQzVCLEtBQUksQ0FBQyxZQUFZLG9CQUFPLFdBQVcsQ0FBQyxDQUFDO2dCQUNyQyxLQUFJLENBQUMsSUFBSSxHQUFHLEtBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO2FBQ3hDO1NBQ0YsQ0FBQyxDQUFDO0tBQ047Ozs7SUFFTyxrREFBbUI7Ozs7UUFDekIsTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLEtBQUssRUFBRTtZQUM1QixDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsVUFBQyxJQUFTO2dCQUNqQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7YUFDL0IsQ0FBQztZQUNKLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDOzs7Ozs7SUFHeEIsaURBQWtCOzs7O0lBQWxCLFVBQW1CLENBQUM7UUFDbEIsQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxlQUFlLEdBQUcsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDO0tBQzlDOzs7O0lBRUQsZ0RBQWlCOzs7SUFBakI7UUFDRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0tBQ3hDOztnQkEzR0YsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSxtQkFBbUI7b0JBQzdCLFFBQVEsRUFBRSw0a0RBcUNMO29CQUNMLE1BQU0sRUFBRSxDQUFDLDR4Q0FBNHhDLENBQUM7aUJBQ3Z5Qzs7OztnQkE3Q1EsV0FBVzs7OzBCQStDakIsS0FBSzs7K0JBaERSOztTQStDYSxvQkFBb0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1lbnVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvbWVudS5zZXJ2aWNlJztcbmltcG9ydCB7IFBST0ZJTEVfTUVOVVMgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvcHJvZmlsZS1tZW51cyc7XG5pbXBvcnQgeyBMT0dfT1VUIH0gZnJvbSAnLi4vLi4vaWNvbnMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdhcHAtbWVudS1zaWRlLWJhcicsXG4gIHRlbXBsYXRlOiBgPGRpdiBjbGFzcz1cInNpZGViYXItY29udGFpbmVyXCI+XG4gIDxkaXYgY2xhc3M9XCJzaWRlYmFyLXVzZXItcHJvZmlsZS1ibG9ja1wiPlxuICAgIDxkaXYgY2xhc3M9XCJzaWRlYmFyLXVzZXItcHJvZmlsZS1sb2dvXCIgKm5nSWY9XCIhbG9hZGluZ1VzZXJcIj57e2N1cnJlbnRVc2VyPy5uYW1lIHwgYWJicmV2aWF0ZX19PC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cInNpZGViYXItdXNlci1wcm9maWxlLWluZm9cIj5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzaWRlYmFyLXVzZXItbmFtZVwiICpuZ0lmPVwiIWxvYWRpbmdVc2VyXCI+e3tjdXJyZW50VXNlcj8ubmFtZX19PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzaWRlYmFyLXVzZXItZW1haWxcIiAqbmdJZj1cIiFsb2FkaW5nVXNlclwiPnt7Y3VycmVudFVzZXI/LmVtYWlsfX08L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPHVsIGNsYXNzPVwic2lkZWJhci1saXN0LWJsb2NrXCI+XG4gICAgPGxpIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAnc2lkZWJhci1hcHAtaGlkZGVuJzogIXNob3dTaWRlYmFyQXBwc1xuICAgICAgICB9XCI+XG4gICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInNpZGViYXItYXBwLWlucHV0XCIgcGxhY2Vob2xkZXI9XCJTZWFyY2ggQXBwc1wiIFsobmdNb2RlbCldPVwiZmlsdGVyZWRBcHBcIiAobmdNb2RlbENoYW5nZSk9XCJ1cGRhdGVNZW51TW9kdWxlcygpXCI+XG4gICAgPC9saT5cbiAgICA8bGkgY2xhc3M9XCJzaWRlYmFyLWFwcC1saXN0XCIgW25nQ2xhc3NdPVwie1xuICAgICAgICAgICdzaWRlYmFyLWFwcC1oaWRkZW4nOiAhc2hvd1NpZGViYXJBcHBzXG4gICAgICAgIH1cIj5cbiAgICAgIDxhICpuZ0Zvcj1cImxldCBhcHAgb2YgIGFwcHMgfCBmaWx0ZXJCeU5hbWU6IGZpbHRlcmVkQXBwXCIgW2hyZWZdPVwiYXBwLmRlZmF1bHRBY3Rpb25cIiBjbGFzcz1cInNpZGViYXItYXBwLW1lbnUtYnRuXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzaWRlYmFyLWFwcC1tZW51LWJ0bi1jb250ZW50XCI+XG4gICAgICAgICAgPGltZyBhbHQ9XCJcIiBbc3JjXT1cImFwcC5pY29uXCIgdGl0bGU9XCJ7e2FwcC5kaXNwbGF5TmFtZX19XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImFwcC1tZW51LW5hbWVcIj57e2FwcC5kaXNwbGF5TmFtZX19PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9hPlxuICAgIDwvbGk+XG4gICAgPGxpICpuZ0Zvcj1cImxldCBwcm9maWxlTWVudSBvZiBwcm9maWxlTWVudXNcIj5cbiAgICAgIDxhIFtocmVmXT1cInJvb3RVcmwgKyBwcm9maWxlTWVudS5kZWZhdWx0QWN0aW9uXCI+XG4gICAgICAgIDxpbWcgYWx0PVwiXCIgW3NyY109XCJwcm9maWxlTWVudS5pY29uXCI+IHt7cHJvZmlsZU1lbnUubmFtZX19XG4gICAgICA8L2E+XG4gICAgPC9saT5cbiAgICA8bGk+XG4gICAgICA8YSBbaHJlZl09XCJyb290VXJsICsgJ2RoaXMtd2ViLWNvbW1vbnMtc2VjdXJpdHkvbG9nb3V0LmFjdGlvbidcIj5cbiAgICAgICAgPGltZyBbc3JjXT1cImxvZ091dEljb25cIj4gTG9nIE91dFxuICAgICAgPC9hPlxuICAgIDwvbGk+XG4gIDwvdWw+XG48L2Rpdj5gLFxuICBzdHlsZXM6IFtgLnNpZGViYXItdXNlci1wcm9maWxlLWJsb2Nre3RleHQtYWxpZ246bGVmdDtiYWNrZ3JvdW5kLWNvbG9yOiNlZWU7aGVpZ2h0OjUwcHg7cGFkZGluZzo1cHg7ZGlzcGxheTpmbGV4fS5zaWRlYmFyLXVzZXItcHJvZmlsZS1sb2dve2hlaWdodDo0MHB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtmb250LXNpemU6MTRweDtmb250LXdlaWdodDo1MDA7Y29sb3I6IzllOWU5ZTt3aWR0aDo0MHB4O2JvcmRlci1yYWRpdXM6MjVweDt0ZXh0LWFsaWduOmNlbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiNkZGR9LnNpZGViYXItdXNlci1wcm9maWxlLWluZm97ZGlzcGxheTpmbGV4O3BhZGRpbmctbGVmdDoxMHB4O2FsaWduLWl0ZW1zOmNlbnRlcn0uc2lkZWJhci1saXN0LWJsb2Nre2xpc3Qtc3R5bGUtdHlwZTpub25lO21hcmdpbjowO3BhZGRpbmc6MDtkaXNwbGF5OmJsb2NrfS5zaWRlYmFyLWhpZGRlbntkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS5zaWRlYmFyLWFwcC1pbnB1dHtib3JkZXItc3R5bGU6bm9uZTtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlO2NvbG9yOiM3Nzc7d2lkdGg6MTAwJTtmb250LXNpemU6MTJweDtwYWRkaW5nOjVweCA3cHh9LnNpZGViYXItYXBwLWlucHV0OmZvY3Vze291dGxpbmU6MH0uc2lkZWJhci1saXN0LWJsb2NrIGxpIGF7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Zm9udC1zaXplOjEzcHg7ZGlzcGxheTpibG9jaztjb2xvcjojMDAwO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7cGFkZGluZzo3cHggMTBweH0uc2lkZWJhci1saXN0LWJsb2NrIGxpIGEgaW1ne2hlaWdodDoxNXB4fS5zaWRlYmFyLWFwcC1saXN0e2Rpc3BsYXk6ZmxleDtvdmVyZmxvdzphdXRvO2hlaWdodDoyMDBweDtmbGV4LXdyYXA6d3JhcH0uc2lkZWJhci1hcHAtbWVudS1idG57ZGlzcGxheTpmbGV4IWltcG9ydGFudDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjttYXJnaW46NXB4O3RleHQtZGVjb3JhdGlvbjpub25lO2JvcmRlci1yYWRpdXM6M3B4O2JvcmRlcjoxcHggc29saWQgI2VlZTt0cmFuc2l0aW9uOmFsbCAuMnMgZWFzZS1pbi1vdXQ7d2lkdGg6ODBweDtoZWlnaHQ6ODBweH0uc2lkZWJhci1hcHAtbWVudS1idG4tY29udGVudHt0ZXh0LWFsaWduOmNlbnRlcn0uYXBwLW1lbnUtbmFtZXttYXJnaW4tdG9wOjVweDtmb250LXNpemU6MTFweH0uc2lkZWJhci11c2VyLW5hbWV7Zm9udC1zaXplOjEzcHh9LnNpZGViYXItdXNlci1lbWFpbHtmb250LXNpemU6MTFweDtjb2xvcjojNzc3O2ZvbnQtc3R5bGU6aXRhbGljfWBdXG59KVxuZXhwb3J0IGNsYXNzIE1lbnVTaWRlQmFyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KClcbiAgcm9vdFVybDogc3RyaW5nO1xuICBzaG93UHJvZmlsZTogYm9vbGVhbjtcbiAgY3VycmVudFVzZXI6IGFueTtcbiAgbG9hZGluZ1VzZXI6IGJvb2xlYW47XG4gIHByb2ZpbGVNZW51czogYW55W107XG4gIGFwcHM6IGFueVtdO1xuICBvcmlnaW5hbEFwcHM6IGFueVtdO1xuICBsb2FkaW5nTW9kdWxlczogYm9vbGVhbjtcbiAgZmlsdGVyZWRBcHA6IHN0cmluZztcbiAgc2hvd1NpZGViYXJBcHBzOiBib29sZWFuO1xuICBsb2dPdXRJY29uOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBtZW51U2VydmljZTogTWVudVNlcnZpY2UpIHtcbiAgICB0aGlzLnNob3dQcm9maWxlID0gZmFsc2U7XG4gICAgdGhpcy5yb290VXJsID0gJy4uLy4uLy4uLyc7XG4gICAgdGhpcy5sb2FkaW5nVXNlciA9IHRydWU7XG4gICAgdGhpcy5hcHBzID0gW107XG4gICAgdGhpcy5vcmlnaW5hbEFwcHMgPSBbXTtcbiAgICB0aGlzLmxvYWRpbmdNb2R1bGVzID0gdHJ1ZTtcbiAgICB0aGlzLnByb2ZpbGVNZW51cyA9IFBST0ZJTEVfTUVOVVM7XG4gICAgdGhpcy5maWx0ZXJlZEFwcCA9ICcnO1xuICAgIHRoaXMuc2hvd1NpZGViYXJBcHBzID0gZmFsc2U7XG4gICAgdGhpcy5sb2dPdXRJY29uID0gTE9HX09VVDtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMubWVudVNlcnZpY2UuZ2V0VXNlckluZm8odGhpcy5yb290VXJsKS5zdWJzY3JpYmUoKHByb2ZpbGU6IGFueSkgPT4ge1xuICAgICAgaWYgKHByb2ZpbGUpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IHtcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLmRpc3BsYXlOYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHRoaXMubG9hZGluZ1VzZXIgPSBmYWxzZTtcbiAgICB9KTtcblxuICAgIHRoaXMubWVudVNlcnZpY2VcbiAgICAgIC5nZXRNZW51TW9kdWxlcyh0aGlzLnJvb3RVcmwpXG4gICAgICAuc3Vic2NyaWJlKChtZW51TW9kdWxlczogYW55KSA9PiB7XG4gICAgICAgIGlmIChtZW51TW9kdWxlcyAhPT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMubG9hZGluZ01vZHVsZXMgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLm9yaWdpbmFsQXBwcyA9IFsuLi5tZW51TW9kdWxlc107XG4gICAgICAgICAgdGhpcy5hcHBzID0gdGhpcy5fcHJlcGFyZU1lbnVNb2R1bGVzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfcHJlcGFyZU1lbnVNb2R1bGVzKCkge1xuICAgIHJldHVybiB0aGlzLmZpbHRlcmVkQXBwID09PSAnJ1xuICAgICAgPyB0aGlzLm9yaWdpbmFsQXBwcy5maWx0ZXIoKG1lbnU6IGFueSkgPT4ge1xuICAgICAgICAgIHJldHVybiAhbWVudS5vbmx5U2hvd09uU2VhcmNoO1xuICAgICAgICB9KVxuICAgICAgOiB0aGlzLm9yaWdpbmFsQXBwcztcbiAgfVxuXG4gIHRvZ2dsZVNpZGViYXJNZW51cyhlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLnNob3dTaWRlYmFyQXBwcyA9ICF0aGlzLnNob3dTaWRlYmFyQXBwcztcbiAgfVxuXG4gIHVwZGF0ZU1lbnVNb2R1bGVzKCkge1xuICAgIHRoaXMuYXBwcyA9IHRoaXMuX3ByZXBhcmVNZW51TW9kdWxlcygpO1xuICB9XG59XG4iXX0=